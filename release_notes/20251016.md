# Release Notes - October 16, 2025

**Version**: 1.0
**Keyboard**: Keebio Iris Rev7 / CE Rev1
**Keymap**: zerodice0
**Release Date**: 2025-10-16

---

## Summary

This release updates the zerodice0 keymap to comply with QMK's modern standards and introduces RGB Matrix support. The update modernizes keycode definitions, enables advanced RGB lighting control, and adds new layer-specific functionality while maintaining full compatibility with both Iris Rev7 and Iris CE Rev1 hardware.

---

## Key Changes

### 1. **Keycode Modernization**

#### Mouse Keycodes
Updated deprecated mouse keycode naming conventions to QMK's current standard across layers 4 and 5:

- **Button Keycodes** (Layer 4, Row 2):
  - `KC_BTN1` → `MS_BTN1` (Mouse Button 1)
  - `KC_BTN2` → `MS_BTN2` (Mouse Button 2)
  - `KC_BTN3` → `MS_BTN3` (Mouse Button 3)
  - `KC_BTN4` → `MS_BTN4` (Mouse Button 4)

- **Mouse Movement Keycodes** (Layer 4, Row 3):
  - `KC_MS_L` → `MS_LEFT` (Mouse Left)
  - `KC_MS_D` → `MS_DOWN` (Mouse Down)
  - `KC_MS_U` → `MS_UP` (Mouse Up)
  - `KC_MS_R` → `MS_RGHT` (Mouse Right)

- **Mouse Wheel Keycodes** (Layer 4, Row 4):
  - `KC_WH_R` → `MS_WHLD` (Mouse Wheel Left)
  - `KC_WH_U` → `MS_WHLU` (Mouse Wheel Up)
  - `KC_WH_D` → `MS_WHLD` (Mouse Wheel Down)
  - `KC_WH_L` → `MS_WHLR` (Mouse Wheel Right)

#### RGB Keycodes
Standardized RGB lighting keycodes to align with RGB_MATRIX_ENABLE configuration:

- **RGB Mode Keycodes** (Layers 3 and 4):
  - `RGB_M_P` → `RM_NEXT` (RGB Pattern Next)
  - `RGB_M_B` → `RM_VALD` (RGB Brightness Down, alternative pattern control)
  - `RGB_M_R` → `RM_SPDU` (RGB Speed Up)
  - `RGB_M_SW` → `RM_SPDD` (RGB Speed Down)
  - `RGB_MOD` → `RM_NEXT` (RGB Pattern Next)

- **RGB Control Keycodes** (Layer 3, Rows 2-3):
  - `RGB_HUI` → `RM_HUI` (RGB Hue Increase)
  - `RGB_HUD` → `RM_HUD` (RGB Hue Decrease)
  - `RGB_SAI` → `RM_SATU` (RGB Saturation Increase)
  - `RGB_SAD` → `RM_SATD` (RGB Saturation Decrease)
  - `RGB_VAI` → `RM_VALU` (RGB Value/Brightness Increase)
  - `RGB_VAD` → `RM_VALD` (RGB Value/Brightness Decrease)

### 2. **Build Configuration Updates**

**rules.mk** - RGB Matrix Configuration:
```makefile
# Previous: RGBLIGHT_ENABLE (underglow only)
# Updated: RGB_MATRIX_ENABLE = yes
```

**Rationale**:
- Enables per-key RGB matrix support for the Iris CE Rev1 and compatible keyboards
- Aligns with QMK's modern RGB lighting architecture
- Provides more granular RGB control options

### 3. **Layer 3 (_RIGHT_UNDER) Enhancements**

Added RGB color and brightness control keys on the right-side modifier layer:

- **Row 2** (Color Control):
  - `KC_HOME` position: `RGB_HUI` (Hue ↑)
  - `KC_UP` area: `RGB_SAI` (Saturation ↑)
  - Right side: `RGB_VAI` (Brightness ↑)

- **Row 3** (Brightness & Saturation):
  - `KC_END` position: `RGB_HUD` (Hue ↓)
  - `KC_DOWN` area: `RGB_SAD` (Saturation ↓)
  - Right side: `RGB_VAD` (Brightness ↓)

**Visual Layout** (Layer 3, Right Side):
```
┌────────┬────────┬────────┬────────┐
│ RGB_HUI│ RGB_SAI│ RGB_VAI│ KC_BSLS│  Row 2
├────────┼────────┼────────┼────────┤
│ RGB_HUD│ RGB_SAD│ RGB_VAD│ _______│  Row 3
└────────┴────────┴────────┴────────┘
```

### 4. **Layer 4 (_LEFT_UP) Updates**

**New Addition**: Cmd+` (Tab Switch) Keycode
- Row 1, leftmost position on modifier row: Added `TAP_P` (Cmd+\` Backtick)
- Enables quick window switching within applications (macOS standard)
- Located at position where `RGB_M_P` was previously

---

## Layer Overview

### Layer 0: _BASIC (Default)
- Standard QWERTY layout
- Left thumb: `KC_LGUI` (Cmd), `LEFT_UNDER` (layer switch), `KC_ENT` (Enter)
- Right thumb: `KC_SPC` (Space), `RIGHT_UNDER` (layer switch), `KC_RALT` (Right Alt)
- Modifier key: `MO(4)` (temporarily activate Layer 4)

### Layer 1: _LEFT_UNDER
- Number pad simulation (Left side)
- Symbols and special characters
- Triggered by holding left thumb key

### Layer 2: _RIGHT_UNDER
- Function keys (F1-F12)
- Media controls (Prev, Next, Volume Up/Down)
- **RGB Controls** (Newly updated):
  - Hue/Saturation/Brightness adjustment
  - Supports advanced RGB matrix animation control

### Layer 3: _BOTH_UNDER (Tri-Layer)
- System commands and shortcuts
- Auto-activated when both thumb keys are held simultaneously
- RGB mode controls using updated RM_* keycodes

### Layer 4: _LEFT_UP
- Mouse control (Movement, buttons, wheel)
- macOS screenshot shortcuts (Cmd+Shift+3/4/5 variants)
- Browser navigation (Back, Forward)
- Finder navigation (Up, Down)
- **New**: Cmd+` window switcher

---

## Technical Specifications

### Hardware Support
- **Keyboards**: Keebio Iris Rev7, Iris CE Rev1
- **MCU**: Compatible with QMK-supported MCUs
- **RGB Matrix**: Per-key RGB (if hardware present)
- **Features Enabled**:
  - Split keyboard support
  - Mouse key support
  - RGB Matrix control
  - EXTRAKEY (media keys)
  - Link-Time Optimization (LTO)

### Build Configuration
```
BOOTMAGIC_ENABLE = no
MOUSEKEY_ENABLE = yes        # Required for mouse layer
EXTRAKEY_ENABLE = yes        # Media keys (Vol, Play, etc.)
CONSOLE_ENABLE = yes         # Debug output
COMMAND_ENABLE = no
NKRO_ENABLE = no
BACKLIGHT_ENABLE = no
RGBLIGHT_ENABLE = no
AUDIO_ENABLE = no
SPLIT_KEYBOARD = yes         # Split keyboard configuration
ENCODER_ENABLE = no
RGB_MATRIX_ENABLE = yes      # Per-key RGB matrix (NEW)
LTO_ENABLE = yes             # Link-time optimization
```

---

## Compilation & Flashing

### Build Command
```bash
qmk compile -kb keebio/iris/rev7 -km zerodice0
```

Or for Iris CE Rev1:
```bash
qmk compile -kb keebio/iris_ce/rev1 -km zerodice0
```

### Flash Command
```bash
qmk flash -kb keebio/iris/rev7 -km zerodice0
```

**Note**: Enter bootloader mode by pressing the reset button on your keyboard when prompted.

---

## Compatibility & Platform Notes

### macOS (Primary Target)
- ✅ Full support for all keycodes and macOS-specific shortcuts
- ✅ Cmd/Option key combinations work as expected
- ✅ Screenshot shortcuts optimized for macOS Ventura and Sonoma
- ✅ Emoji picker and window switcher fully functional

### Windows/Linux
- ⚠️ Partial compatibility
- Cmd key codes may not behave as expected (mapped to Super/Windows key)
- macOS-specific shortcuts will not work as intended
- Mouse controls and RGB matrix fully functional
- Basic layer functionality unaffected

### QMK Version Compatibility
- **Minimum**: QMK Firmware 0.24.0+
- **Tested**: QMK Firmware 0.24.x series
- **Recommended**: Latest QMK development branch

---

## Migration Guide (From Previous Versions)

If you're updating from the previous zerodice0 keymap version:

1. **Backup your existing keymap**
   ```bash
   cp keymap.c keymap.c.backup
   ```

2. **Update QMK CLI**
   ```bash
   qmk update
   ```

3. **Compile and flash** using the commands above

4. **Verify functionality**:
   - Test mouse layer operations
   - Verify RGB matrix controls on Layer 2 and 3
   - Confirm Layer 4 window switcher (Cmd+`)

### Behavioral Changes
- Mouse wheel scrolling: Direction follows macOS conventions (reversed if coming from Windows)
- RGB control: Now uses modern RGB_MATRIX keycodes instead of RGBLIGHT
- Layer 4: New Cmd+` keycode added to Tab position

---

## Known Limitations & Future Improvements

### Current Limitations
- RGB effects demonstration limited to color/brightness adjustment (matrix animations controlled via firmware compile options)
- Encoder support disabled (not configured for this keymap)
- Audio output disabled (hardware dependent)

### Potential Future Enhancements
- [ ] RGB animation presets with dedicated keycodes
- [ ] Rotary encoder support for volume/brightness control
- [ ] Additional layer for game-specific key bindings
- [ ] Macro recording and playback support
- [ ] Per-layer RGB color presets

---

## Files Modified

- **keymap.c**: Keycode updates (mouse, RGB), layer modifications
- **rules.mk**: RGB_MATRIX_ENABLE configuration
- **.gitignore**: Added zerodice0 path exclusion from parent qmk_firmware repository

---

## Credits & References

- **Keyboard Design**: Keebio (https://keebio.com)
- **Firmware**: QMK Project (https://qmk.fm)
- **Keymap**: zerodice0 (Personal custom build)
- **Base Layout**: Iris keyboard by Keebio, modified for split macOS workflow

---

## Version History

| Version | Date | Changes |
|---------|------|---------|
| 1.0 | 2025-10-16 | Initial release with QMK standard keycode updates, RGB Matrix support |
| 0.9 | 2025-04-28 | Previous version with deprecated keycodes |

---

## Support & Issues

For issues or questions:
1. Check QMK documentation: https://docs.qmk.fm/
2. Verify keyboard compatibility at: https://keebio.com
3. Review keymap source at: https://github.com/zerodice0/iris56_keymap

---

**Last Updated**: 2025-10-16
**Status**: Active & Maintained
**License**: GPL-2.0-or-later
